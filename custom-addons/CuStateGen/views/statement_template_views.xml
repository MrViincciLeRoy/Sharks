<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Statement Template Form View -->
    <record id="view_statement_template_form" model="ir.ui.view">
        <field name="name">statement.template.form</field>
        <field name="model">statement.template</field>
        <field name="arch" type="xml">
            <form string="Statement Template">
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="toggle_active" type="object" 
                                class="oe_stat_button" icon="fa-archive">
                            <field name="active" widget="boolean_button" 
                                   options="{'terminology': 'archive'}"/>
                        </button>
                    </div>
                    
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="Template Name..."/>
                        </h1>
                    </div>
                    
                    <group>
                        <field name="is_default" widget="boolean_toggle"/>
                    </group>
                    
                    <notebook>
                        <page string="Company Branding">
                            <group>
                                <group string="Company Information">
                                    <field name="company_logo" widget="image" class="oe_avatar"/>
                                    <field name="company_name" placeholder="Company Name"/>
                                    <field name="company_address" placeholder="Company Address"/>
                                    <field name="company_phone" placeholder="+27 11 123 4567"/>
                                    <field name="company_email" placeholder="info@company.com"/>
                                    <field name="company_website" placeholder="www.company.com"/>
                                </group>
                                
                                <group string="Design Colors">
                                    <field name="header_color" widget="color"/>
                                    <field name="accent_color" widget="color"/>
                                </group>
                            </group>
                        </page>
                        
                        <page string="Layout Options">
                            <group>
                                <group string="Display Options">
                                    <field name="show_logo"/>
                                    <field name="show_aging"/>
                                    <field name="show_payment_terms"/>
                                    <field name="show_bank_details"/>
                                </group>
                            </group>
                        </page>
                        
                        <page string="Bank Details">
                            <group>
                                <group>
                                    <field name="bank_name" placeholder="Bank Name"/>
                                    <field name="bank_account_number" placeholder="Account Number"/>
                                </group>
                                <group>
                                    <field name="bank_branch" placeholder="Branch Name"/>
                                    <field name="swift_code" placeholder="SWIFT/BIC Code"/>
                                </group>
                            </group>
                        </page>
                        
                        <page string="Footer &amp; Terms">
                            <group>
                                <field name="footer_message" 
                                       placeholder="Thank you for your business..."
                                       widget="text"/>
                                <field name="terms_and_conditions" 
                                       placeholder="Payment terms, interest rates, dispute procedures..."
                                       widget="text"/>
                            </group>
                        </page>
                        
                        <page string="Preview">
                            <div class="alert alert-info">
                                <strong>ðŸ’¡ Tip:</strong> Save the template first, then generate a test statement 
                                to see how it looks with your branding.
                            </div>
                            
                            <!-- Preview Card -->
                            <div class="card mt-3" style="max-width: 800px;">
                                <div class="card-header text-white" 
                                     t-attf-style="background-color: {{record.header_color.raw_value or '#1f77b4'}};">
                                    <h4 class="mb-0">
                                        <i class="fa fa-file-text-o me-2"/>
                                        CUSTOMER STATEMENT
                                    </h4>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-6">
                                            <div t-if="record.show_logo.raw_value and record.company_logo.raw_value">
                                                <field name="company_logo" widget="image" 
                                                       options="{'size': [150, 60]}" readonly="1"/>
                                            </div>
                                            <h5 class="mt-2"><field name="company_name" readonly="1"/></h5>
                                            <div class="text-muted">
                                                <field name="company_address" readonly="1"/>
                                            </div>
                                        </div>
                                        <div class="col-6 text-end">
                                            <h6>Statement #: STMT/00001</h6>
                                            <p class="text-muted">
                                                Date: <t t-esc="context_today().strftime('%Y-%m-%d')"/>
                                            </p>
                                        </div>
                                    </div>
                                    
                                    <hr t-attf-style="border-color: {{record.accent_color.raw_value or '#ff7f0e'}};"/>
                                    
                                    <div class="row mt-3">
                                        <div class="col-12">
                                            <p class="text-center fst-italic">
                                                <field name="footer_message" readonly="1"/>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Statement Template Tree View -->
    <record id="view_statement_template_tree" model="ir.ui.view">
        <field name="name">statement.template.tree</field>
        <field name="model">statement.template</field>
        <field name="arch" type="xml">
            <tree string="Statement Templates" decoration-success="is_default">
                <field name="name"/>
                <field name="company_name"/>
                <field name="is_default" widget="boolean_toggle"/>
                <field name="show_logo" widget="boolean_toggle"/>
                <field name="show_aging" widget="boolean_toggle"/>
                <field name="show_bank_details" widget="boolean_toggle"/>
                <field name="active" invisible="1"/>
            </tree>
        </field>
    </record>

    <!-- Statement Template Kanban View -->
    <record id="view_statement_template_kanban" model="ir.ui.view">
        <field name="name">statement.template.kanban</field>
        <field name="model">statement.template</field>
        <field name="arch" type="xml">
            <kanban class="o_kanban_mobile">
                <field name="name"/>
                <field name="company_name"/>
                <field name="is_default"/>
                <field name="header_color"/>
                <field name="company_logo"/>
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_global_click">
                            <div class="o_kanban_record_top">
                                <div class="o_kanban_record_headings">
                                    <strong class="o_kanban_record_title">
                                        <field name="name"/>
                                        <span t-if="record.is_default.raw_value" 
                                              class="badge rounded-pill text-bg-success ms-2">Default</span>
                                    </strong>
                                </div>
                            </div>
                            <div class="o_kanban_record_body">
                                <div class="row">
                                    <div class="col-12" t-if="record.company_logo.raw_value">
                                        <field name="company_logo" widget="image" 
                                               options="{'size': [100, 40]}"/>
                                    </div>
                                </div>
                                <div class="row mt-2">
                                    <div class="col-12">
                                        <span class="badge me-1" 
                                              t-attf-style="background-color: {{record.header_color.raw_value}};">
                                            Header
                                        </span>
                                        <field name="company_name"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- Actions -->
    <record id="action_statement_template" model="ir.actions.act_window">
        <field name="name">Statement Templates</field>
        <field name="res_model">statement.template</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create your first statement template
            </p>
            <p>
                Customize how your customer statements look with your branding and layout preferences.
            </p>
        </field>
    </record>

    <!-- Menu -->
    <menuitem id="menu_configuration" 
              name="Configuration" 
              parent="menu_custategen_root" 
              sequence="90"/>
    
    <menuitem id="menu_statement_templates" 
              name="Statement Templates" 
              parent="menu_configuration" 
              action="action_statement_template" 
              sequence="10"/>
</odoo>